# backend\game\scenarios.py
#

SCENE_TEMPLATES = [
    {
        "id": "scene0",
        "index": 0,
        "roleMap": {
            "남동생": "brother",
            "누나": "sister",
            "호랑이": "tiger",
            "하늘신": "goddess",
        },
        "turns": [
            {
                "role": "brother",
                "title": "어둠이 내린 산길",
                "description": "누나와 함께 산을 내려가던 중, 등 뒤에서 나뭇가지가 '우두둑' 부러지는 소리가 들렸다. 불길한 예감이 엄습한다.",
                "choices": [
                    {"id": "A", "text": "전력질주로 산길을 벗어난다", "appliedStat": "체력", "modifier": 0},
                    {"id": "B", "text": "재빨리 바위 뒤로 몸을 숨긴다", "appliedStat": "지혜", "modifier": 1},
                ],
                "fragments": {
                    "A_SP": "남동생은 바람처럼 달 그림자 속으로 사라졌다.",
                    "A_S": "남동생은 숨을 헐떡이며 앞서 달려나갔다.",
                    "A_F": "남동생은 서두르다 그만 발을 헛디뎌 넘어졌다.",
                    "A_SF": "남동생은 넘어져 다치는 바람에 오히려 속도가 더 느려졌다.",
                    "B_SP": "남동생은 바위와 하나가 된 듯 완벽하게 몸을 숨겼다.",
                    "B_S": "남동생은 간신히 바위 뒤에 몸을 욱여넣었다.",
                    "B_F": "남동생의 옷자락이 바위 밖으로 삐져나와 바람에 흔들렸다.",
                    "B_SF": "남동생은 숨으려다 바위에 부딪혀 '쿵' 소리를 내고 말았다.",
                },
                "statChanges": {
                    "A_SP": {"체력": 1}, "A_SF": {"체력": -1},
                    "B_SP": {"지혜": 1}, "B_SF": {"지혜": -1},
                },
            },
            {
                "role": "sister",
                "title": "어둠이 내린 산길",
                "description": "정체불명의 추격자가 따라붙은 것 같다. 동생의 행동을 본 당신은 어떻게 대처해야 할까?",
                "choices": [
                    {"id": "C", "text": "우리가 지나온 흔적을 지운다", "appliedStat": "지혜", "modifier": 0},
                    {"id": "D", "text": "동생에게 다음 행동을 신호로 알린다", "appliedStat": "지혜", "modifier": 1},
                ],
                "fragments": {
                    "C_SP": "누나는 침착하게 자신과 동생의 발자국을 지워 추격자가 흔적을 찾지 못하게 만들었다.",
                    "C_S": "누나는 나뭇가지로 바닥을 쓸어 발자국을 희미하게 만들었다.",
                    "C_F": "누나는 흔적을 지우려다 오히려 흙먼지를 일으켜 눈에 띄게 만들었다.",
                    "C_SF": "누나는 당황한 나머지 진흙탕에 미끄러져 더 큰 흔적을 남기고 말았다.",
                    "D_SP": "누나는 눈빛과 손짓만으로 동생에게 완벽하게 자신의 의도를 전달했다.",
                    "D_S": "누나는 작은 목소리로 동생에게 속삭여 다음 계획을 알렸다.",
                    "D_F": "누나는 신호를 보내려다 작은 발소리를 내고 말았다.",
                    "D_SF": "누나는 자신도 모르게 '조심해!'라고 외쳐버렸다.",
                },
                "statChanges": {
                    "C_SP": {"지혜": 1}, "C_SF": {"지혜": -1},
                    "D_SP": {"지혜": 1}, "D_SF": {"지혜": -1},
                },
            },
            {
                "role": "tiger",
                "title": "어둠 속의 사냥",
                "description": "어둠 속에서 맛있는 냄새가 난다. 두 아이의 움직임이 느껴진다. 어떻게 사냥을 시작할까?",
                "choices": [
                    {"id": "H", "text": "후각을 이용해 냄새를 쫓는다", "appliedStat": "행운", "modifier": 0},
                    {"id": "J", "text": "큰 소리를 질러 공포에 질리게 만든다", "appliedStat": "지혜", "modifier": -1},
                ],
                "fragments": {
                    "H_SP": "호랑이는 예리한 후각으로 아이들의 냄새를 정확히 포착하고 추격을 시작했다.",
                    "H_S": "호랑이는 바람에 섞인 냄새를 맡고 아이들이 있는 방향을 대략 짐작했다.",
                    "H_F": "호랑이는 여러 냄새가 뒤섞여 방향을 잡지 못하고 잠시 혼란스러워했다.",
                    "H_SF": "호랑이는 다른 동물의 냄새를 아이들의 것으로 착각하고 엉뚱한 방향으로 향했다.",
                    "J_SP": "호랑이의 위압적인 포효에 온 숲의 생물들이 숨을 죽였다. 아이들은 공포에 질려 얼어붙었다.",
                    "J_S": "호랑이의 울음소리가 산 전체에 메아리치며 아이들의 간담을 서늘하게 했다.",
                    "J_F": "호랑이의 소리는 나무에 막혀 멀리 퍼져나가지 못했다.",
                    "J_SF": "호랑이는 헛기침을 하는 바람에 위협적인 소리를 내는 데 실패했다.",
                },
                "statChanges": {
                    "H_SP": {"행운": 1}, "H_SF": {"행운": -1},
                    "J_SP": {"지혜": 1}, "J_SF": {"지혜": -1},
                },
            },
            {
                "role": "goddess",
                "title": "하늘에서의 관조",
                "description": "산 아래, 가여운 아이들이 사나운 호랑이에게 쫓기고 있다. 당신은 어떤 기적을 행할 것인가?",
                "choices": [
                    {"id": "V", "text": "아이들의 정확한 위치를 파악한다", "appliedStat": "지혜", "modifier": 2},
                    {"id": "W", "text": "작은 기적을 일으켜 호랑이를 막는다", "appliedStat": "행운", "modifier": 2},
                ],
                "fragments": {
                    "V_SP": "하늘신은 천리안으로 어둠 속 아이들의 위치를 완벽하게 파악했다.",
                    "V_S": "하늘신은 지상의 기운을 읽어 아이들이 있을 만한 곳을 짚어냈다.",
                    "V_F": "짙은 어둠과 안개 때문에 하늘신은 아이들의 위치를 파악하는 데 어려움을 겪었다.",
                    "V_SF": "하늘신은 다른 기운에 현혹되어 아이들의 위치를 완전히 잘못 파악했다.",
                    "W_SP": "하늘신의 권능으로 마른하늘에 번개가 내리쳐 호랑이의 바로 앞을 밝혔다. 호랑이는 겁을 먹고 주춤했다.",
                    "W_S": "하늘신이 일으킨 바람이 나뭇가지를 흔들어 호랑이의 시선을 다른 곳으로 돌렸다.",
                    "W_F": "하늘신의 기도는 미약하여 호랑이는 아무것도 느끼지 못했다.",
                    "W_SF": "하늘신의 기도가 오히려 짙은 안개를 만들어 호랑이가 몸을 숨기기 좋게 만들었다.",
                },
                "statChanges": {
                    "V_SP": {"지혜": 2}, "V_SF": {"지혜": -2},
                    "W_SP": {"행운": 2}, "W_SF": {"행운": -2},
                },
            },
        ],
        "nextScene": {
            "routes": [
                {"when": {"tiger": {"grade": ["SP", "S"]}}, "gotoIndex": 1},
                {"when": {"sister": {"grade": ["SP"]}, "brother": {"grade": ["SP"]}}, "gotoIndex": 2},
            ],
            "fallback": 1,
        },
    },
    {
        "id": "scene1",
        "index": 1,
        "roleMap": { "남동생": "brother", "누나": "sister", "호랑이": "tiger", "하늘신": "goddess" },
        "turns": [
            {
                "role": "tiger",
                "title": "숨 막히는 추격",
                "description": "아이들이 바로 눈앞에 있다. 어떻게 사냥할 것인가?",
                "choices": [
                    {"id": "K", "text": "맹렬하게 달려들어 아이들을 덮친다", "appliedStat": "체력", "modifier": 0},
                    {"id": "L", "text": "아이들이 도망칠 길목에 매복한다", "appliedStat": "지혜", "modifier": 0},
                ],
                "fragments": {
                    "K_SP": "호랑이는 무서운 속도로 아이들과의 거리를 좁혔다.",
                    "K_S": "호랑이는 아이들의 뒤를 끈질기게 쫓았다.",
                    "K_F": "호랑이는 추격 중 돌부리에 걸려 넘어졌다.",
                    "K_SF": "호랑이는 덤불에 발이 엉켜 한동안 움직이지 못했다.",
                    "L_SP": "호랑이는 아이들의 동선을 완벽히 예측하고 길목에 매복했다.",
                    "L_S": "호랑이는 큰 바위 뒤에 몸을 숨기고 아이들이 오기를 기다렸다.",
                    "L_F": "호랑이가 숨은 곳이 너무 얕아 꼬리가 밖으로 삐져나왔다.",
                    "L_SF": "호랑이가 매복한 장소에 갑자기 멧돼지 떼가 나타나 호랑이를 방해했다.",
                },
                "statChanges": {
                    "K_SP": {"체력": 1}, "K_SF": {"체력": -1},
                    "L_SP": {"지혜": 1}, "L_SF": {"지혜": -1},
                },
            },
            {
                "role": "brother",
                "title": "숨 막히는 추격",
                "description": "호랑이가 바로 코앞까지 쫓아왔다! 위기를 어떻게 타개할 것인가?",
                "choices": [
                    {"id": "E", "text": "가장 가까운 나무 위로 올라간다", "appliedStat": "체력", "modifier": 0},
                    {"id": "F", "text": "호랑이를 향해 손에 잡히는 돌을 던진다", "appliedStat": "행운", "modifier": 0},
                ],
                "fragments": {
                    "E_SP": "남동생은 원숭이처럼 재빠르게 나무 위로 날아올라 호랑이의 습격을 피했다.",
                    "E_S": "남동생은 아슬아슬하게 나무 위로 올라가 몸을 숨겼다.",
                    "E_F": "남동생은 나무를 오르다 가지를 놓쳐 바닥으로 굴러떨어졌다.",
                    "E_SF": "남동생은 나무에 세게 부딪혀 잠시 정신을 잃고 말았다.",
                    "F_SP": "남동생이 던진 돌이 호랑이의 급소를 정확하게 맞혔다! 호랑이가 고통에 몸부림친다.",
                    "F_S": "남동생이 던진 돌이 호랑이의 시야를 잠시 가려 시간을 벌었다.",
                    "F_F": "남동생이 던진 돌은 엉뚱한 곳으로 날아갔다.",
                    "F_SF": "남동생이 던진 돌은 나뭇가지에 맞아 큰 소리를 냈고, 오히려 위치만 노출되었다.",
                },
                "statChanges": {
                    "E_SP": {"체력": 1}, "E_SF": {"체력": -1},
                    "F_SP": {"행운": 1}, "F_SF": {"행운": -1},
                },
            },
            {
                "role": "sister",
                "title": "숨 막히는 추격",
                "description": "동생이 위험에 처했고, 호랑이는 끈질기다. 어떤 묘안을 낼 것인가?",
                "choices": [
                    {"id": "G", "text": "미리 준비한 연막탄을 터뜨린다", "appliedStat": "지혜", "modifier": 1},
                    {"id": "I", "text": "소리를 질러 호랑이를 다른 곳으로 유인한다", "appliedStat": "지혜", "modifier": 1},
                ],
                "fragments": {
                    "G_SP": "누나가 터뜨린 연막탄이 순식간에 짙은 안개를 만들어 아이들의 모습을 감쪽같이 숨겼다.",
                    "G_S": "누나는 작은 폭죽을 터뜨려 호랑이의 주의를 다른 곳으로 끄는 데 성공했다.",
                    "G_F": "아뿔싸, 연막탄이 터지지 않았다.",
                    "G_SF": "연막탄에서 연기가 너무 조금 새어 나와, 오히려 누나의 위치만 발각되고 말았다.",
                    "I_SP": "누나의 영리한 계략에 호랑이는 완벽하게 속아 다른 방향으로 달려갔다.",
                    "I_S": "누나는 호랑이를 잠시 혼란에 빠뜨려 시간을 버는 데 성공했다.",
                    "I_F": "호랑이는 누나의 꾀를 금방 눈치채고 비웃었다.",
                    "I_SF": "누나의 유인책은 오히려 호랑이를 자극하여 더욱 맹렬하게 달려들게 만들었다.",
                },
                "statChanges": {
                    "G_SP": {"지혜": 1}, "G_SF": {"지혜": -1},
                    "I_SP": {"지혜": 1}, "I_SF": {"지혜": -1},
                },
            },
            {
                "role": "goddess",
                "title": "하늘에서의 관조",
                "description": "추격전이 절정에 달했다. 아이들의 목숨이 경각에 달린 상황, 당신의 선택은?",
                "choices": [
                    {"id": "X", "text": "아이들을 숨겨줄 짙은 구름을 만든다", "appliedStat": "지혜", "modifier": 1},
                    {"id": "Y", "text": "호랑이를 방해할 거센 바람을 일으킨다", "appliedStat": "행운", "modifier": 1},
                ],
                "fragments": {
                    "X_SP": "하늘신이 만든 기적의 구름이 내려와 아이들을 완전히 덮어 호랑이의 시야에서 사라지게 했다.",
                    "X_S": "하늘신의 구름이 아이들 주변을 감싸 모습을 희미하게 만들었다.",
                    "X_F": "구름은 너무 옅어 아이들을 가려주지 못하고 금방 흩어져 버렸다.",
                    "X_SF": "구름이 아이들 머리 위에만 맴돌아, 오히려 아이들의 위치를 광고하는 꼴이 되었다.",
                    "Y_SP": "하늘신이 일으킨 거센 회오리바람이 호랑이의 눈과 코를 괴롭혀 추격을 불가능하게 만들었다.",
                    "Y_S": "갑자기 불어온 바람에 나뭇잎들이 흩날려 호랑이의 주의를 분산시켰다.",
                    "Y_F": "바람이 너무 약해 호랑이는 아무런 영향도 받지 않았다.",
                    "Y_SF": "바람이 아이들 쪽에서 호랑이 쪽으로 불어, 아이들의 냄새를 호랑이에게 더 명확히 전달해주었다.",
                },
                "statChanges": {
                    "X_SP": {"지혜": 2}, "X_SF": {"지혜": -2},
                    "Y_SP": {"행운": 2}, "Y_SF": {"행운": -2},
                },
            },
        ],
        "nextScene": {
            "routes": [
                {"when": {"tiger": {"grade": ["SP", "S"]}, "brother": {"grade": ["F", "SF"]}}, "gotoIndex": 2},
                {"when": {"sister": {"grade": ["SP"]}, "goddess": {"grade": ["SP"]}}, "fallback": "end"},
            ],
            "fallback": 2,
        },
    },
    {
        "id": "scene2",
        "index": 2,
        "roleMap": { "남동생": "brother", "누나": "sister", "호랑이": "tiger", "하늘신": "goddess" },
        "turns": [
            {
                "role": "tiger",
                "title": "운명의 결전",
                "description": "도망칠 곳은 없다. 이 지긋지긋한 추격전을 끝낼 시간이다.",
                "choices": [
                    {"id": "Q", "text": "하늘이 무너질 듯 포효하여 겁을 준다", "appliedStat": "지혜", "modifier": 0},
                    {"id": "R", "text": "아이들의 유일한 퇴로를 막아선다", "appliedStat": "체력", "modifier": 1},
                ],
                "fragments": {
                    "Q_SP": "호랑이의 포효에 겁을 먹은 아이들은 그 자리에 얼어붙고 말았다.",
                    "Q_S": "호랑이의 위협적인 울음소리에 아이들은 겁에 질려 뒷걸음질 쳤다.",
                    "Q_F": "호랑이의 포효는 지친 탓인지 힘이 없었다.",
                    "Q_SF": "호랑이는 포효하려다 목이 쉬어 '켁켁'거리는 소리만 냈다.",
                    "R_SP": "호랑이는 아이들의 도주로를 완벽하게 차단하고 천천히 거리를 좁혔다.",
                    "R_S": "호랑이가 아이들 앞길을 가로막고 으르렁거렸다.",
                    "R_F": "호랑이가 길을 막았지만, 그 옆으로 빠져나갈 작은 틈이 보였다.",
                    "R_SF": "호랑이가 길을 잘못 막는 바람에, 아이들에게 더 좋은 도망 경로를 열어주고 말았다.",
                },
                "statChanges": {
                    "Q_SP": {"지혜": 1}, "Q_SF": {"지혜": -1},
                    "R_SP": {"체력": 1}, "R_SF": {"체력": -1},
                },
            },
            {
                "role": "sister",
                "title": "운명의 결전",
                "description": "더 이상 도망칠 곳이 없다. 마지막 선택의 순간이다.",
                "choices": [
                    {"id": "O", "text": "마을을 향해 마지막 힘을 다해 달려간다", "appliedStat": "체력", "modifier": 0},
                    {"id": "P", "text": "품 속에 있던 콩 주머니를 호랑이에게 던진다", "appliedStat": "행운", "modifier": 0},
                ],
                "fragments": {
                    "O_SP": "누나는 믿을 수 없는 속도로 달려 호랑이의 추격에서 벗어나 마을에 도움을 요청했다.",
                    "O_S": "누나는 필사적으로 뛰었지만, 호랑이의 발소리가 등 뒤에서 점점 가까워져 왔다.",
                    "O_F": "누나는 이미 너무 지쳐서 더 이상 뛸 수 없었다.",
                    "O_SF": "누나는 헛발을 딛고 넘어져 큰 부상을 입었다.",
                    "P_SP": "누나가 던진 콩알들이 정확히 호랑이의 두 눈에 들어가, 호랑이는 고통에 날뛰었다!",
                    "P_S": "콩 주머니가 호랑이의 얼굴 앞에서 터져, 잠시 시야를 가리는 데 성공했다.",
                    "P_F": "콩 주머니는 허공에 흩뿌려져 아무런 효과도 없었다.",
                    "P_SF": "누나가 던진 콩 주머니는 호랑이를 더욱 화나게 만들 뿐이었다.",
                },
                "statChanges": {
                    "O_SP": {"체력": 1}, "O_SF": {"체력": -1},
                    "P_SP": {"행운": 1}, "P_SF": {"행운": -1},
                },
            },
            {
                "role": "brother",
                "title": "운명의 결전",
                "description": "호랑이의 마지막 위협 앞에서, 당신은 어떻게 맞설 것인가?",
                "choices": [
                    {"id": "M", "text": "있는 힘껏 소리를 질러 호랑이를 위협한다", "appliedStat": "지혜", "modifier": -1},
                    {"id": "N", "text": "주변의 나무 막대기를 집어 방어 태세를 갖춘다", "appliedStat": "체력", "modifier": 1},
                ],
                "fragments": {
                    "M_SP": "남동생의 절박하고 우렁찬 목소리에 호랑이가 순간적으로 겁을 먹고 멈칫했다.",
                    "M_S": "남동생의 외침에 호랑이가 잠시 주춤하며 경계했다.",
                    "M_F": "남동생의 목소리는 너무 작아 으르렁거리는 호랑이에게 들리지 않았다.",
                    "M_SF": "남동생은 소리를 지르려다 겁에 질려 목소리조차 나오지 않았다.",
                    "N_SP": "남동생은 호랑이를 상대할 만큼 굵고 튼튼한 나무 막대기를 찾아 손에 쥐었다.",
                    "N_S": "남동생은 자신의 몸을 지킬 만한 적당한 막대기를 찾아 방어 자세를 취했다.",
                    "N_F": "남동생이 집어 든 막대기는 너무 약해서 금방 부러져 버렸다.",
                    "N_SF": "남동생은 막대기를 찾다가 넘어져 호랑이에게 무방비로 노출되었다.",
                },
                "statChanges": {
                    "M_SP": {"지혜": 1}, "M_SF": {"지혜": -1},
                    "N_SP": {"체력": 1}, "N_SF": {"체력": -1},
                },
            },
            {
                "role": "goddess",
                "title": "운명의 결전",
                "description": "모든 것이 끝나는 마지막 순간. 아이들과 호랑이의 운명을 결정하라.",
                "choices": [
                    {"id": "Z", "text": "아이들을 하늘로 끌어올려 해와 달로 만든다", "appliedStat": "지혜", "modifier": 2},
                    {"id": "AA", "text": "호랑이에게 신의 벌을 내린다", "appliedStat": "행운", "modifier": 3},
                ],
                "fragments": {
                    "Z_SP": "하늘신은 아이들을 하늘로 부드럽게 끌어올렸다. 아이들은 환한 빛에 휩싸여 하나는 해가, 하나는 달이 되었다.",
                    "Z_S": "하늘신의 권능이 아이들의 몸을 공중으로 살짝 띄워 호랑이의 공격을 피하게 했다.",
                    "Z_F": "아이들은 땅에 발이 붙은 채 꼼짝도 하지 않았다.",
                    "Z_SF": "하늘신은 아이들을 들어 올리려 했지만, 알 수 없는 힘에 막혀 실패했다.",
                    "AA_SP": "하늘신의 준엄한 벌이 내려, 호랑이는 그 자리에 돌처럼 굳어버렸다.",
                    "AA_S": "하늘에서 떨어진 작은 벼락이 호랑이를 쫓아내 아이들을 구했다.",
                    "AA_F": "하늘신의 벌은 호랑이에게 아무런 영향을 주지 못했다.",
                    "AA_SF": "하늘신의 벌은 빗나가 엉뚱한 나무를 쓰러뜨리고 말았다.",
                },
                "statChanges": {
                    "Z_SP": {"지혜": 2}, "Z_SF": {"지혜": -2},
                    "AA_SP": {"행운": 3}, "AA_SF": {"행운": -3},
                },
            },
        ],
        "nextScene": {
            "routes": [],
            "fallback": "end",
        },
    },
]

def get_scene_template(index: int):
    for tpl in SCENE_TEMPLATES:
        if tpl["index"] == index:
            return tpl
    return None